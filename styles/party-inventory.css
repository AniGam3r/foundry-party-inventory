/* --- Sheet Injection Overrides --- */
.dnd5e.sheet.actor.character .inventory .item-controls,
.dnd5e2.sheet.actor .inventory .item-controls,
.dnd5e.sheet.actor .inventory .item-controls {
    display: flex !important;
    flex-direction: row;
    align-items: center;
    justify-content: flex-end;
    flex: 0 0 86px !important; 
}

/* --- Main Application Window --- */
.party-inventory,
#party-inventory {
    min-width: 450px;
    min-height: 400px; /* Increased slightly for better layout */
}

/* V13 Layout Fix: Keeps currency at the bottom */
.party-inventory .window-content,
#party-inventory .window-content {
    display: flex;
    flex-direction: column;
    background: var(--background-sheet, url(../../../ui/parchment.jpg)) repeat;
    color: var(--color-text-dark-primary);
    font-family: var(--font-primary);
    padding: 0; /* Remove padding here to allow scrollbar to touch edges */
    overflow: hidden;
}

/* Scrollable area for items */
.party-inventory .items-list {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
}

.party-inventory .item-section {
    margin-bottom: 6px;
    padding: 3px;
    border-radius: 5px;
    background: rgba(0, 0, 0, 0.1);
}

.party-inventory .item-section p {
    margin: 6px 3px;
    color: var(--color-text-dark-secondary);
    font-size: 14px;
    font-weight: bold;
}

.party-inventory .item-section ul {
    background: url(/ui/parchment.jpg);
    border-radius: 4px;
    padding: 5px;
    margin: 0;
    list-style: none;
}

/* --- Scratchpad Items (Compact & Square) --- */
.party-inventory .scratchpad .item {
    margin-bottom: 2px;
}

.party-inventory .item-row {
    display: flex;
    align-items: center;
    height: 32px; /* Prevent icon stretching */
    gap: 5px;
}

.party-inventory .item-image {
    flex: 0 0 32px;
    width: 32px;
    height: 32px;
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center;
    border: 1px solid #c9c7b8;
    cursor: pointer;
}

.party-inventory .scratchpad .item-name {
    flex: 2;
    padding-right: 5px;
}

.party-inventory .scratchpad .item-name input {
    height: 26px;
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid transparent;
}

.party-inventory .item-type-select {
    flex: 0 0 120px !important;
    height: 26px;
}

/* Fix for Dark Description Box */
.party-inventory textarea {
    font-family: "Signika", serif;
    font-size: 13px;
    border: 1px solid #c9c7b8 !important;
    background: rgba(255, 255, 255, 0.4) !important; /* Parchment-friendly light background */
    color: #111 !important; /* Visible text */
    resize: none;
    width: 100%;
    margin-top: 4px;
    padding: 5px;
}

.party-inventory__description-container {
    padding-left: 35px;
    padding-right: 5px;
}

/* --- Currency Footer (Fixed at Bottom) --- */
.party-inventory .party-inventory__currency {
    flex: 0 0 auto;
    padding: 8px 15px;
    background: rgba(0, 0, 0, 0.05);
    border-top: 1px solid #7a7971;
}

.party-inventory__currency-decal {
    align-self: center;
    text-align: center;
    flex: 30px 0 0;
    font-size: 18px;
}

.party-inventory__currency-row a {
    background: rgba(0,0,0,.4);
    color: rgba(236,233,223,1);
    border-radius: 5px;
    font-size: 18px;
    line-height: 30px;
    flex: 0 0 30px;
    text-align: center;
    margin-left: 4px;
    cursor: pointer;
}

.party-inventory__currency-entry {
    display: flex;
    align-items: center;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 5px;
    padding: 0 .5rem 0 0;
    margin-right: .5rem;
    line-height: 30px;
    flex: 1 0 60px;
}

.party-inventory__currency-entry input {
    text-align: right;
    background: transparent;
    border: none;
    color: inherit;
}

/* --- Item Injection Visuals --- */
.party-inventory-module {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: var(--dnd5e-color-light-gray, #999);
    opacity: 0.7;
}

.party-inventory-module.active {
    color: var(--dnd5e-color-gold, #ff6400) !important;
    opacity: 1 !important;
    text-shadow: 0 0 4px rgba(255, 100, 0, 0.5);
}

/* Fix the stacking/clumping of footnote data */
.party-inventory .party-inventory__footnote {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;          /* Force one line */
    align-items: center;
    gap: 12px;                  /* Space out the icons/text */
    margin-top: 4px;
    padding-top: 4px;
    border-top: 1px solid rgba(0, 0, 0, 0.05);
    font-size: 0.85em;
    color: #666;
}

.party-inventory__footnote-data, 
.party-inventory__footnote-quantity {
    white-space: nowrap;        /* Prevent "Has additional..." from wrapping */
    display: flex;
    align-items: center;
    gap: 4px;
}

/* Make the info circle look interactive */
.party-inventory__footnote-data i {
    color: #4b4a44;
    transition: color 0.2s;
}

.party-inventory__footnote-data i:hover {
    color: #ff6400;
}
